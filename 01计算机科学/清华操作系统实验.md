# 学堂在线 操作系统 RISC-V
[操作系统 RISC-V 2022年](https://www.xuetangx.com/learn/thu08091002729/thu08091002729/12425488/video/31184048?channel=i.area.learn_title)

[操作系统 RISC-V 实验文档](https://learningos.cn/uCore-Tutorial-Guide-2022S/chapter1/index.html)

[操作系统 RISC-V 实验代码](https://github.com/LearningOS/uCore-Tutorial-Code-2022S)

# 学堂在线 操作系统
[操作系统  2019年～2022年](https://www.xuetangx.com/learn/space/THU08091000267/THU08091000267/12424484?channel=i.area.manual_search)
    

## [Ucore Github](https://github.com/kiukotsu/ucore/tree/master)

[实验指导书](https://objectkuan.gitbooks.io/ucore-docs/content/)

功能不全

## Lab0

#### Ucore 系统结构图

![](Media/清华操作系统实验/20251006175025.png)

##3 设置实验环境
Lab1~Lab8
https://github.com/chyyuu/os_kernel_lab

安装 Linux 实验环境

Ubunu 常用指令

控制流程
* 输入/输出
* 重定向
* 管道
* 后台进程

环境变量

获得软件包

    命令行获取软件 apt；
    配置升级源；
    查看帮助文件，man 是 manual 的缩写；

可能用到的软件


### 手动在物理 PC 中安装环境
安装 Ubuntu
```
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install build-essential git qemu-system-x86 vim-gnome gdb cgdb eclipse-cdt make diffutils exuberant-ctags tmux openssh-server cscope meld qgit gitg gcc-multilib gcc-multilib g++-multilib
```
### 实验中的练习步骤
1. 学习源码，cd labX
2. 阅读，修改源码；可以用 understand 等软件
3. 修改完毕后，编辑软件；make
4. 如果编译无误，运行测试；
    ```
    make qemu
    ```
5. 如果需要调试
   1. 基于 cgdb 字符方式，lab1_ans 为例，make debug
   2. 基于 eclipse-CDT 的 debug view 进行调试
6. 查看自己得分，make grade

## 课程汇总
https://github.com/chyyuu/os_course_info

PPT https://learningos.cn/os-lectures/

# 环境搭建
## Qemu 模拟器安装
https://www.qemu.org/download/#linux

https://learningos.cn/uCore-Tutorial-Guide-2022S/chapter0/1setup-devel-env.html#qemu

qemu 不是 qume !!!

qemu 不是 qume !!!

qemu 不是 qume !!!

## 多版本 gcc
http://iotts.com.cn/blog/2024/03/14/ubuntu22-04%E5%AE%89%E8%A3%85gcc-4-8/
```
cd Desktop/
mkdir install_g++-4.8
cd install_g++-4.8/
sudo apt update
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/g++-4.8_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/libstdc++-4.8-dev_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/gcc-4.8-base_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/gcc-4.8_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/libgcc-4.8-dev_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/cpp-4.8_4.8.5-4ubuntu8_amd64.deb 
wget http://mirrors.kernel.org/ubuntu/pool/universe/g/gcc-4.8/libasan0_4.8.5-4ubuntu8_amd64.deb  
sudo apt install ./gcc-4.8_4.8.5-4ubuntu8_amd64.deb ./gcc-4.8-base_4.8.5-4ubuntu8_amd64.deb ./libstdc++-4.8-dev_4.8.5-4ubuntu8_amd64.deb ./cpp-4.8_4.8.5-4ubuntu8_amd64.deb ./libgcc-4.8-dev_4.8.5-4ubuntu8_amd64.deb ./libasan0_4.8.5-4ubuntu8_amd64.deb ./g++-4.8_4.8.5-4ubuntu8_amd64.deb
```

https://zeyulong.com/posts/6dba0521/
```
# gcc
# 通过下面的指令来选择不同的gcc的版本/查看各版本的优先级
sudo update-alternatives --config gcc
# 将版本7加入候选中，其中50、100为优先级
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 50
# 将版本10加入候选中
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-10 100
# 删除选项操作
sudo update-alternatives --remove gcc /usr/bin/gcc-4.8

# g++
# 通过下面的指令来选择不同的g++的版本/查看各版本的优先级
sudo update-alternatives --config g++
# 将版本7加入候选中，其中50、100为优先级
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 50
# 将版本10加入候选中
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-10 100
# 删除选项操作
sudo update-alternatives --remove g++ /usr/bin/g++-4.8

```

## Eclipse（版本太旧了，改用 gdb）

C 语言开发，查看编辑源码

https://www.youtube.com/watch?v=e1YuPOpWXn8

https://linuxconfig.org/eclipse-ide-for-c-c-developers-installation-on-ubuntu-22-04


### 编译工程

Debug 配置

    Debug Configurations

Zylin Embedded debug 插件

Help 里面 install new software 安装，安装地址 http://opensource.zylin.com/zylincdt

目前安装失败


## UnderStand

函数调用关系

## Meld

比较 2 个文件夹区别，类似 Diff

## Git 使用

## gdb 调试

make debug
    
    字符方式的 cgdb

需要先安装
    
    sudo apt-get install gdb cgdb